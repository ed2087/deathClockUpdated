console.log("readPageFun.js");const upvoteFetch=async()=>{const e=id_("csrf").value,t=`/terrorTales/upvote?storyID=${id_("postId").value}&token=${e}`,o=await fetch(t,{method:"GET"}),a=await o.json();if("ok"===a.status){const e=queryAll_(".upvoteCounter");for(let t=0;t<e.length;t++)e[t].innerHTML=a.message;id_("upVote").disabled=!0,globalMessage("Upvote","Thank you for voting!",null)}else globalMessage("Upvote",a.message,null),id_("upVote").disabled=!0},reportFun=async()=>{const e=id_("csrf").value,t=id_("postId").value,o=prompt("Please enter a reason for reporting this story");if(""===o||null===o)return;const a=`/terrorTales/report?storyID=${t}&token=${e}&reason=${o}`,r=await fetch(a,{method:"GET"}),s=await r.json();s.status,globalMessage("Report",s.message,null)},aTagMold=e=>`<a href="${e}" target="_blank" style="color:#eb6612;">${extractDomain(e)}</a>`,extractDomain=e=>{const t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null},processParagraphs=()=>{document.querySelectorAll(".sentence_p").forEach((e=>{e.querySelectorAll("a");let t=findUrls(e.innerHTML);t.length>0&&t.forEach((t=>{e.innerHTML=e.innerHTML.replace(t,aTagMold(t))}))}))},findUrls=e=>e.match(/(https?:\/\/[^\s]+)/g)||[];window.onload=processParagraphs;
