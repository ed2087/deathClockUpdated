console.log("readPageFun.js");const upvoteFetch=async()=>{const e=id_("csrf").value,t=`/terrorTales/upvote?storyID=${id_("postId").value}&token=${e}`,o=await fetch(t,{method:"GET"}),n=await o.json();if("ok"===n.status){const e=queryAll_(".upvoteCounter");for(let t=0;t<e.length;t++)e[t].innerHTML=n.message;id_("upVote").disabled=!0,globalMessage("Upvote","Thank you for voting!",null)}else globalMessage("Upvote",n.message,null),id_("upVote").disabled=!0},reportFun=async()=>{const e=id_("csrf").value,t=id_("postId").value,o=prompt("Please enter a reason for reporting this story");if(""===o||null===o)return;const n=`/terrorTales/report?storyID=${t}&token=${e}&reason=${o}`,s=await fetch(n,{method:"GET"}),a=await s.json();a.status,globalMessage("Report",a.message,null)};function wrapLinkWithATag(e){const t=/https?:\/\/[^\s]+/,o=e.match(t);if(o){const n=o[0],s=`<a href="${n}" style="color:#eb6612" class="readPage_innerLink" target="_blank">${new URL(n).hostname}</a>`;return e.replace(t,s)}return e}window.addEventListener("load",(()=>{const e=queryAll_(".sentence_p");for(let t=0;t<e.length;t++)e[t].innerHTML=wrapLinkWithATag(e[t].innerHTML)}));
